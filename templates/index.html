<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تبدیل عکس به سیاه و سفید</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div style="display:flex; gap:20px;">
  <div style="flex:3; max-width:20cm;">
    <img id="preview" src="{{ url_for('static', filename='sample.jpg') }}" style="width:100%;">
  </div>
  <div style="flex:1; display:flex; flex-direction:column; gap:10px;">
    <label>روشنایی</label>
    <input type="range" id="brightness" min="-100" max="100" value="0">
    <label>کنتراست</label>
    <input type="range" id="contrast" min="50" max="300" value="100">
    <label>گاما</label>
    <input type="range" id="gamma" min="10" max="300" value="100">
    <label>Blur</label>
    <input type="range" id="blur" min="1" max="50" value="1">
    <label>Sharpness</label>
    <input type="range" id="sharp" min="0" max="300" value="0">
    <label>Shadows</label>
    <input type="range" id="shadows" min="-50" max="50" value="0">
    <label>Highlights</label>
    <input type="range" id="highlights" min="-50" max="50" value="0">
  </div>
</div>

<script>
const sliders = document.querySelectorAll('input[type="range"]');
sliders.forEach(slider=>{
  slider.addEventListener('input', ()=>{
    const data = {};
    sliders.forEach(s=>data[s.id]=s.value);
    fetch('/update_preview',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    })
    .then(res=>res.blob())
    .then(blob=>{
      document.getElementById('preview').src=URL.createObjectURL(blob);
    });
  });
});
</script>
</body>
</html>
